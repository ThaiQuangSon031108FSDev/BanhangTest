@model List<Banhang.Models.CartItem>
@{
    ViewData["Title"] = "Gi·ªè h√†ng";
    decimal total = ViewBag.Total ?? 0m;
}

@await Html.PartialAsync("_PremiumHero", new PremiumHeroViewModel
{
    Eyebrow = "Ki·ªÉm tra ƒë∆°n h√†ng",
    Title = "Gi·ªè h√†ng c·ªßa b·∫°n üõí",
    Subtitle = "Ki·ªÉm tra l·∫°i s·∫£n ph·∫©m tr∆∞·ªõc khi ti·∫øn h√†nh thanh to√°n."
})

<section class="py-5">
    <div class="container">
        @if (Model == null || Model.Count == 0)
        {
            <div class="glass-card p-5 text-center">
                <h2 class="text-gradient mb-3">Gi·ªè h√†ng tr·ªëng!</h2>
                <p class="text-white-50">Kh√°m ph√° th√™m s·∫£n ph·∫©m h·∫•p d·∫´n t·∫°i trang ch·ªß.</p>
                <a asp-controller="Home" asp-action="Index" class="btn btn-gradient btn-lg mt-3">Ti·∫øp t·ª•c mua s·∫Øm</a>
            </div>
        }
        else
        {
            <div class="glass-card p-4 mb-4">
                <div class="table-responsive">
                    <table class="table align-middle text-white mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th></th>
                                <th>S·∫£n ph·∫©m</th>
                                <th>ƒê∆°n gi√°</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>T·∫°m t√≠nh</th>
                                <th class="text-end">H√†nh ƒë·ªông</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td style="width:90px">
                                        <img src="@(string.IsNullOrEmpty(item.ImageUrl) ? "https://via.placeholder.com/120" : item.ImageUrl)" class="rounded" style="width:80px; height:80px; object-fit:cover;" alt="@item.ProductName" />
                                    </td>
                                    <td>
                                        <div class="fw-semibold">@item.ProductName</div>
                                        <small class="text-white-50">M√£ SP: @item.ProductID</small>
                                    </td>
                                    <td>@item.Price.ToString("#,0") ƒë</td>
                                    <td style="width:160px">
                                        <form class="d-flex" method="post" asp-action="Update" data-loading="true">
                                            @Html.AntiForgeryToken()
                                            <input type="hidden" name="productId" value="@item.ProductID" />
                                            <input class="form-control me-2" type="number" name="quantity" value="@item.Quantity" min="1" />
                                            <button class="btn btn-sm btn-gradient" type="submit">C·∫≠p nh·∫≠t</button>
                                        </form>
                                    </td>
                                    <td class="fw-semibold text-gradient">@item.Subtotal.ToString("#,0") ƒë</td>
                                    <td class="text-end">
                                        <form method="post" asp-action="Remove" class="d-inline" data-confirm="X√≥a s·∫£n ph·∫©m n√†y kh·ªèi gi·ªè h√†ng?" data-loading="true">
                                            @Html.AntiForgeryToken()
                                            <input type="hidden" name="productId" value="@item.ProductID" />
                                            <button class="btn btn-sm btn-outline-danger" type="submit">X√≥a</button>
                                        </form>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h3 class="h5 text-gradient mb-3">∆Øu ƒë√£i d√†nh cho b·∫°n</h3>
                        <ul class="text-white-50 mb-0">
                            <li>üöö Mi·ªÖn ph√≠ giao h√†ng cho ƒë∆°n t·ª´ 500.000ƒë</li>
                            <li>üí≥ Thanh to√°n an to√†n v·ªõi nhi·ªÅu ph∆∞∆°ng th·ª©c</li>
                            <li>üéÅ Ho√†n ti·ªÅn 5% cho th√†nh vi√™n th√¢n thi·∫øt</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="glass-card p-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-white-50">T·∫°m t√≠nh</span>
                            <span>@total.ToString("#,0") ƒë</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="text-white-50">Ph√≠ v·∫≠n chuy·ªÉn</span>
                            <span>0 ƒë</span>
                        </div>
                        <hr class="border-secondary" />
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="fw-bold">T·ªïng c·ªông</span>
                            <span class="display-6 text-gradient">@total.ToString("#,0") ƒë</span>
                        </div>
                        <a asp-controller="Order" asp-action="Checkout" class="btn btn-gradient btn-lg w-100 mt-4">Thanh to√°n ngay</a>
                    </div>
                </div>
            </div>
        }
    </div>
</section>
