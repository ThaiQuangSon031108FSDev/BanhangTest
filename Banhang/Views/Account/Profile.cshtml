@using System.Linq
@model Banhang.Models.ViewModels.ProfileViewModel
@{
    ViewData["Title"] = "H·ªì s∆° c√° nh√¢n";
}

<div class="page-hero gradient-bg py-5 text-white text-center position-relative overflow-hidden">
    <div class="floating-shape shape1"></div>
    <div class="floating-shape shape2"></div>
    <div class="floating-shape shape3"></div>
    <div class="container position-relative">
        <h1 class="display-5 fw-bold mb-2">Xin ch√†o, @Model.FullName üëã</h1>
        <p class="lead mb-0">Qu·∫£n l√Ω th√¥ng tin t√†i kho·∫£n v√† b·∫£o m·∫≠t c·ªßa b·∫°n t·∫°i ƒë√¢y.</p>
    </div>
</div>

<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="glass-card p-4 h-100">
                    <h2 class="h4 mb-4 text-gradient">Th√¥ng tin t√†i kho·∫£n</h2>
                    <ul class="list-unstyled mb-4">
                        <li class="mb-3">üë§ <strong>T√™n ƒëƒÉng nh·∫≠p:</strong> @Model.Username</li>
                        <li class="mb-3">ü™™ <strong>H·ªç v√† t√™n:</strong> @Model.FullName</li>
                        <li class="mb-3">üìß <strong>Email:</strong> @Model.Email</li>
                        <li class="mb-3">üìû <strong>S·ªë ƒëi·ªán tho·∫°i:</strong> @(string.IsNullOrWhiteSpace(Model.Phone) ? "Ch∆∞a c·∫≠p nh·∫≠t" : Model.Phone)</li>
                        <li class="mb-3">üéØ <strong>Vai tr√≤:</strong> @Model.RoleName</li>
                        <li class="mb-0">üïí <strong>Ng√†y tham gia:</strong> @Model.CreatedAt.ToLocalTime().ToString("dd/MM/yyyy HH:mm")</li>
                    </ul>
                    <div class="d-flex gap-3">
                        <a asp-action="EditProfile" class="btn btn-gradient">Ch·ªânh s·ª≠a th√¥ng tin</a>
                        <a asp-action="ChangePassword" class="btn btn-outline-primary">ƒê·ªïi m·∫≠t kh·∫©u</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="glass-card p-4 h-100">
                    <h2 class="h4 mb-4 text-gradient">M·∫πo b·∫£o m·∫≠t</h2>
                    <ul class="text-white-50 mb-0">
                        <li class="mb-3">‚úîÔ∏è S·ª≠ d·ª•ng m·∫≠t kh·∫©u m·∫°nh, k·∫øt h·ª£p ch·ªØ hoa, ch·ªØ th∆∞·ªùng, s·ªë v√† k√Ω t·ª± ƒë·∫∑c bi·ªát.</li>
                        <li class="mb-3">‚úîÔ∏è Kh√¥ng chia s·∫ª th√¥ng tin ƒëƒÉng nh·∫≠p v·ªõi ng∆∞·ªùi kh√°c.</li>
                        <li class="mb-3">‚úîÔ∏è C·∫≠p nh·∫≠t th√¥ng tin li√™n h·ªá ch√≠nh x√°c ƒë·ªÉ nh·∫≠n th√¥ng b√°o ƒë∆°n h√†ng.</li>
                        <li>‚úîÔ∏è ƒêƒÉng xu·∫•t kh·ªèi t√†i kho·∫£n khi s·ª≠ d·ª•ng tr√™n m√°y c√¥ng c·ªông.</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row g-4 mt-1">
            <div class="col-12">
                <div class="glass-card p-4">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h2 class="h4 mb-1 text-gradient">ƒê∆°n h√†ng g·∫ßn ƒë√¢y</h2>
                            <p class="text-white-50 mb-0">Theo d√µi tr·∫°ng th√°i v√† xem chi ti·∫øt c√°c ƒë∆°n h√†ng c·ªßa b·∫°n.</p>
                        </div>
                        <a asp-controller="Cart" asp-action="Index" class="btn btn-outline-light">
                            Ti·∫øp t·ª•c mua s·∫Øm
                        </a>
                    </div>

                    @if (Model.RecentOrders.Any())
                    {
                        <div class="table-responsive">
                            <table class="table align-middle table-borderless mb-0 text-white">
                                <thead class="text-uppercase text-white-50 small">
                                    <tr>
                                        <th>M√£ ƒë∆°n</th>
                                        <th>Ng√†y ƒë·∫∑t</th>
                                        <th>Tr·∫°ng th√°i</th>
                                        <th class="text-end">T·ªïng ti·ªÅn</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var order in Model.RecentOrders)
                                    {
                                        var statusClass = order.Status switch
                                        {
                                            "Pending" => "badge bg-warning text-dark",
                                            "Processing" => "badge bg-info text-dark",
                                            "Shipped" => "badge bg-primary",
                                            "Delivered" => "badge bg-success",
                                            "Cancelled" => "badge bg-danger",
                                            _ => "badge bg-secondary"
                                        };

                                        <tr class="glass-row">
                                            <td>#@order.OrderID</td>
                                            <td>@order.OrderDate.ToLocalTime().ToString("dd/MM/yyyy HH:mm")</td>
                                            <td><span class="@statusClass">@order.Status</span></td>
                                            <td class="text-end fw-semibold">@order.TotalAmount.ToString("N0") ‚Ç´</td>
                                            <td class="text-end">
                                                <a asp-controller="Order" asp-action="Confirmation" asp-route-id="@order.OrderID" class="btn btn-sm btn-gradient">
                                                    Xem chi ti·∫øt
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <div class="text-center text-white-50 py-5">
                            <div class="display-6 mb-3">üõçÔ∏è</div>
                            <h3 class="h5 text-white">B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</h3>
                            <p class="mb-4">B·∫Øt ƒë·∫ßu mua s·∫Øm v√† ƒë∆°n h√†ng c·ªßa b·∫°n s·∫Ω xu·∫•t hi·ªán t·∫°i ƒë√¢y.</p>
                            <a asp-controller="Home" asp-action="Index" class="btn btn-gradient">Kh√°m ph√° s·∫£n ph·∫©m</a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</section>
